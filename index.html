<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Global Migration Scrollytelling Explorer</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="description" content="Interactive scrollytelling platform exploring global migration using UN DESA and World Bank data. Created by Daniela Ayala Chavez.">

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>

  <header class="global-nav">
    <div class="nav-inner">

      <div class="nav-logo">
        <span class="project-title">Global Migration Explorer</span>
      </div>

      <nav class="nav-links" aria-label="Main Navigation">
        <a href="#home">Home</a>
        <a href="#trends">Trends</a>
        <a href="#flows">Flows</a>
        <a href="#migration">Top 5</a>
        <a href="#map">World Map</a>
        <a href="#sources">Sources</a>
      </nav>

    </div>
  </header>

  <div class="wrapper">

    <section id="home">
      <header class="header">
        <h1 class="page-title">Exploring Global Migration Trends</h1>

        <p class="header-sub">
          Select a country to begin exploring global migration flows.
          Visualizations update dynamically as you scroll.
        </p>

        <div class="search-container">
          <input 
            id="country-search"
            type="text"
            placeholder="Type a country..."
            autocomplete="off"
            aria-label="Search for a country"
          />
          <div id="autocomplete-list" class="autocomplete-items"></div>
        </div>
      </header>
    </section>

    <div id="line-tooltip" class="tooltip"></div>
    <div id="map-tooltip" class="tooltip"></div>
    <div id="spots-tooltip" class="tooltip"></div>
    <div id="top5-tooltip" class="tooltip"></div>

    <section id="trends" class="scrolly-section">

      <div class="graphic">
        <div class="graphic-title">Long-term migration dynamics</div>

        <div class="line-layout">

          <div class="line-text">
            <div class="line-main" id="line-main">Migration patterns in Mexico</div>
            <div class="line-note" id="line-note">Scroll to explore.</div>
          </div>

          <div class="line-chart-wrapper">
            <div id="chart-line"></div>
          </div>

        </div>
      </div>

      <div class="steps">
        <article class="step" data-step="1"><h2></h2></article>
        <article class="step" data-step="2"><h2></h2></article>
        <article class="step" data-step="3"><h2></h2></article>
      </div>

    </section>

    <section id="flows" class="static-section">

      <div class="graphic">
        <div class="graphic-title">Migration Corridors</div>

        <div class="spots-text-box">
          <h2 id="spots-country-title">Global migration connections</h2>
          <p id="map-text" class="top5-description"></p>
        </div>

        <div id="chart-map-spots" class="flowmap-hero"></div>

        <div class="year-controls">
          <button id="year-play">▶</button>

          <input
            id="year-slider"
            type="range"
            min="1995" 
            max="2024"
            value="2024"
            step="1"
          />
          <span id="year-label">2024</span>

          <button id="flow-limit-btn" class="limit-btn">Show all</button>
        </div>
      </div>

    </section>


    <section id="migration" class="scrolly-section">

      <div class="graphic">
        <div class="graphic-title">Top migration partners</div>

        <p id="top5-text" class="top5-description"></p>

        <div class="year-controls top5-controls">
          <button id="top5-play" class="limit-btn">▶</button>
          <input
            id="top5-year-slider"
            type="range"
            min="1990"
            max="2024"
            value="2024"
            step="1"
          />
          <span id="top5-year-label">2024</span>
        </div>

        <div class="top5-wrapper">
          <div id="top5-destinations" class="top5-chart"></div>
          <div id="top5-origins" class="top5-chart"></div>
        </div>

      </div>

    </section>

    <section id="map" class="static-section">

      <div class="graphic graphic-wide">

        <div class="graphic-title">Global migration landscape</div>

        <div class="map-main" id="map-main">Country in global context</div>

        <p id="chor-text" class="text-description"></p>

        <div class="metric-buttons">
          <button class="metric-btn" data-metric="emigration_rate">Emigration %</button>
          <button class="metric-btn" data-metric="immigration_rate">Immigration %</button>
          <button class="metric-btn active" data-metric="net_migration">Net migration</button>
        </div>

        <div id="chor-legend" class="chor-legend">
          <div class="chor-legend-gradient"></div>
          <div class="chor-legend-labels">
            <span id="legend-min">Low</span>
            <span id="legend-mid">0%</span>
            <span id="legend-max">High</span>
          </div>
        </div>

        <div id="chart-map" class="chor-map"></div>

      </div>
    </section>


    <section id="sources" class="static-section">
      <div class="graphic">
        <div class="graphic-title">Sources & acknowledgments</div>

        <h2>Data-driven migration storytelling</h2>

        <p>
          This tool visualizes migration through time using data from 
          <a href="https://www.un.org/development/desa/pd/content/international-migrant-stock" target="_blank">UN DESA's International Migrant Stock</a> 
          and the <a href="https://data.worldbank.org/indicator/SP.POP.TOTL" target="_blank">World Bank's World Development Indicators</a>. 
          Dynamic scrollytelling enables intuitive exploration of trends, global context, and country-specific patterns.
        </p>

        <p>
          This project began during James Turk's Data Visualization course in the UChicago CAPP program and grew with his feedback and guidance—thanks, James.
        </p>
      </div>
    </section>


  </div>

  <footer class="footer">
    <div class="footer-inner">

      <div class="footer-left">
        <strong>Global Migration Scrollytelling Explorer</strong><br>
        Built by <strong>Daniela Ayala Chavez</strong><br>
        MSCAPP · University of Chicago
      </div>

      <div class="footer-right">
        <a href="mailto:danielaayala@uchicago.edu">danielaayala@uchicago.edu</a><br>
        <a href="https://github.com/Dayacha/interactive_viz" target="_blank">GitHub</a> 
        <a href="https://dayacha.github.io" target="_blank">Portfoilio</a>
        <a href="https://www.linkedin.com/in/daniela-ayala" target="_blank">LinkedIn</a>
      </div>

    </div>
  </footer>

  <script>
    window.graphicMain = document.getElementById("line-main");
    window.graphicNote = document.getElementById("line-note");

    window.mapMain       = document.getElementById("map-main");
    window.mapNote       = document.getElementById("chor-text");

    window.mapMainSpots  = document.getElementById("spots-country-title");
    window.mapNoteSpots  = document.getElementById("map-text");

    window.top5Main = document.getElementById("top5-main");
    window.top5Note = document.getElementById("top5-note");

    window.storyData = {};
    window.globalData = [];
    window.fullCSV = [];
  </script>

  <script src="js/line.js"></script>
  <script src="js/spots_map.js"></script>
  <script src="js/top5.js"></script>
  <script src="js/chor_map.js"></script>

  <script src="js/autocomplete.js"></script>

  <script src="js/main.js"></script>
  <script src="js/updates.js"></script>
  <script src="js/scroll.js"></script>

</body>
</html>
